<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!-- saved from url=(0067)https://www.fit.vutbr.cz/study/courses/IIS/private/projekt/doc.html -->
<html class="gr__fit_vutbr_cz">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-2" />

    <title>Projekt IIS</title>
    <style type="text/css">
      table {
        border-collapse: collapse;
      }
      td,
      th {
        border: 1px solid black;
        padding: 0.3em 0.5em;
        text-align: left;
      }
      dt {
        font-weight: bold;
        margin-top: 0.5em;
      }

      .inline-code {
        background-color: #fbe5e1;
        color: #c0341d;
        padding: 2px 4px;
        border-radius: 4px;
      }
    </style>
    <style>
      @media print {
        #ghostery-purple-box {
          display: none !important;
        }
      }
    </style>
  </head>
  <body data-gr-c-s-loaded="true">
    <!-- Zkontrolujte prosím nastavení kódování v hlavièce dokumentu 
     podle pou¾itého editoru -->

    <h1>Mzdy a Personalistika (Payday)</h1>
    <!-- Nahradte názvem svého zadání -->

    <dl>
      <dt>Autoøi</dt>
      <dd>
        Jan Demel
        <!-- Nahraïte skuteèným jménem a e-mailem autora a popisem èinnosti -->
        <a href="mailto:xdemel01@stud.fit.vutbr.cz"
          >xdemel01@stud.fit.vutbr.cz</a
        >
        - Návrh a implementácia api
      </dd>
      <dd>
        Jozef Hru¹ka
        <!-- Nahraïte skuteèným jménem a e-mailem autora a popisem èinnosti -->
        <a href="mailto:xhrusk25@stud.fit.vutbr.cz"
          >xhrusk25@stud.fit.vutbr.cz</a
        >
        - Návrh a implementácia frontendu
      </dd>
      <dd>
        Tomá¹ Korec
        <!-- Nahraïte skuteèným jménem a e-mailem autora a popisem èinnosti -->
        <a href="mailto:xkorec04@stud.fit.vutbr.cz"
          >xkorec04@stud.fit.vutbr.cz</a
        >
        - Návrh a implementácia databázy, výpoètu mzdy
      </dd>
      <dt>URL aplikace</dt>
      <dd>
        <a href="http://www.stud.fit.vutbr.cz/~xautor01/IIS"
          >http://www.stud.fit.vutbr.cz/~xautor01/IIS</a
        >
      </dd>
      <dd>
        (pokud má aplikace více vstupních stránek, napi¹te obdobnì dal¹í URL)
      </dd>
    </dl>



    <h2>U¾ivatelé systému pro testování</h2>
    <table>
      <tbody>
        <tr>
          <th>Login</th>
          <th>Heslo</th>
          <th>Role</th>
        </tr>
        <tr>
          <td>admin@test.com</td>
          <td>mysuperpassword</td>
          <td>Administrátor</td>
        </tr>
        <tr>
          <td>accountant@test.com</td>
          <td>mysuperpassword</td>
          <td>Mzdová úèetní</td>
        </tr>
        <tr>
          <td>personalist@test.com</td>
          <td>mysuperpassword</td>
          <td>Personalistka</td>
        </tr>
      </tbody>
    </table>

    
    
    <h2>Use case diagram</h2>
    <dd>
      <a href="https://drive.google.com/open?id=1bmls4FOSS0gETWFHXglth2OC1VUCc-KD" target="blank">https://drive.google.com/open?id=1bmls4FOSS0gETWFHXglth2OC1VUCc-KD</a>
    </dd>



    <h2>Implementace</h2>
    <h3>Frontend</h3>
    <h3>REST API</h3>
    <h4>Adresáøová struktura</h4>
    <ul>
      <li>src (zdrojové soubory)</li>
      <ul>
        <li>config (konfigurace projektu)</li>
        <li>controllers (validace request a volání pøíslu¹né operation s validovanými daty)</li>
        <li>database (setup databáze)</li>
        <ul>
          <li>migrations (migrace databáze)</li>
          <li>models (modely pro práci s knexem)</li>
          <li>seeds (data pro databázi)</li>
        </ul>
        <li>middleware (middlewares - funkce, kterými se ovìøuje request)</li>
        <li>operations (business logika)</li>
        <li>repository (ORM nad databází)</li>
        <li>routes (implementace jednoduchého routeru)</li>
        <li>services (slu¾by, které api vyu¾ívá)</li>
        <li>types (typy do TypeScriptu)</li>
        <li>utils (pomocné funkce)</li>
        <li>validations (validace pomocí jsonschema)</li>
      </ul>
      <li>.eslintrc.js (nastavení pro linter)</li>
      <li>.gitignore</li>
      <li>docker-compose.yaml (nastavení dockeru)</li>
      <li>package.json (informace o api, knihovny a skripty)</li>
      <li>tsconfig.json (konfigurace pro TypeScript)</li>
    </ul>

    <h4>Výpoèet mzdy</h4>
    <p>
      Directory: /backend/src/services/*<br />
      Jazyk: Python<br />
      vystupy:<br />
      - vypocitane udaje sa zapisu do tabulky mesacneho vypoctu m.vypocet<br />
      ktora obsahuje odobne cislo, obdobie a 2000 znakove pole, do ktoreho sa
      zapisuju vypocitane udaje v zakodovanom tvare <br />
      na poziciu definovanu v takulke m.vektor.<br />
      <br />
      vstupy:<br />
      - aktualne obdobie (za ktore sa pocitaju mzdy)<br />
      - id zamestnanca<br />
      - data v tabulke m.udaje a m.osoba<br />
      - kalendar (kazdy pracovnik ma svoj kalendar definovany v mzdovych
      udajoch) <br />
      - datum nastupu (z kmenovych udajov pracovnika)<br />
      - datum ukoncenia pracovneho pomeru (z kmenovych udajov pracovnika)<br />
      - mzdove udaje (vyfiltrovane aktualne platne podla aktualneho obdobia v
      torom sa pocitaju mzdy)<br />
      - zmenove kody vyfiltrovane pre aktualne obdobie za ktore sa pocitaju
      mzdy<br />
    </p>

    <h3>Databáze</h3>
    <p>ER diagram</p>
    <dd>
      <a href="https://dbdiagram.io/d/5dd43412edf08a25543e1edc" target="blank"
        >https://dbdiagram.io/d/5dd43412edf08a25543e1edc</a
      >
    </dd>

    <h2>Instalace</h2>

    <h3>Softwarové po¾adavky</h3>
    <ul>
      <li>Node v10.16.3</li>
      <li>NPM v6.9.0</li>
      <li>Python v2.7.13 (vèetnì knihovny psycopg2 - <a href="https://pypi.org/project/psycopg2/" target="blank">https://pypi.org/project/psycopg2/</a>)</li>
      <li>Docker v19.03.2</li>
    </ul>

    <h3>Instalace API a databáze</h3>
    <ul>
      <li>pøepnìte se do adresáøe ./backend</li>
      <li>nainstalujte si v¹echny dependencies pøíkazem <span class="inline-code">npm install</span></li>
      <li>zbuildìte images pøíkazem <span class="inline-code">docker-compose build</span></li>
      <li>spus»te na pozadí pøíkazem <span class="inline-code">docker-compose up -d api database</span></li>
      <li>mù¾eme se pøesvìdèit, ¾e opravdu do¹lo ke spu¹tìní pøíkazem <span class="inline-code">docker-compose ps</span></li>
      <li>v tuto chvíli ji¾ databáze bì¾í, ale je prázdná. Spustíme migrations, co¾ jsou aditivní úpravy struktury databáze <span class="inline-code">npm run migrate:latest</span></li>
      <li>naplníme databázi daty pøíkazem <span class="inline-code">npm run seed:run</span></li>
    </ul>


    <h2>Známé problémy</h2>
    <p>
      Zde popi¹te, které body zadání nejsou implementovány a z jakého dùvodu.
      Napø. &#8222;Z èasových dùvodù nebyla implementována správa
      u¾ivatelù.&#8221; Pomù¾ete tím zrychlit hodnocení, kdy¾ neimplementované
      funkce nebudeme muset dlouze hledat.
    </p>
  </body>
</html>
